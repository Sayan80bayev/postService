?   	postService/cmd/server	[no test files]
?   	postService/docs	[no test files]
?   	postService/internal/bootstrap	[no test files]
?   	postService/internal/cache	[no test files]
?   	postService/internal/config	[no test files]
?   	postService/internal/delivery	[no test files]
?   	postService/internal/events	[no test files]
?   	postService/internal/mappers	[no test files]
?   	postService/internal/model	[no test files]
?   	postService/internal/repository	[no test files]
?   	postService/internal/routes	[no test files]
=== RUN   TestPostService_CreatePost_Success
[32mINFO[0m PostCreatedEvent event published successfully 2025-09-16 11:41:02
--- PASS: TestPostService_CreatePost_Success (0.00s)
=== RUN   TestPostService_GetPosts_CacheMiss_FetchFromRepo
[32mINFO[0m Fetched posts from DB and cached 2025-09-16 11:41:02
--- PASS: TestPostService_GetPosts_CacheMiss_FetchFromRepo (0.00s)
=== RUN   TestPostService_GetPostByID_CacheMiss
[32mINFO[0m Fetched post 058f6b95-99b3-4697-9f86-b5efca848787 from DB and cached 2025-09-16 11:41:02
--- PASS: TestPostService_GetPostByID_CacheMiss (0.00s)
=== RUN   TestPostService_DeletePost_PermissionDenied
    post_service_test.go:183: 
        	Error Trace:	/Users/sayanseksenbaev/Programming/go-project/services/postService/internal/service/post_service_test.go:183
        	Error:      	Error message not equal:
        	            	expected: "user not allowed"
        	            	actual  : "permission validation failed for post 058f6b95-99b3-4697-9f86-b5efca848787: user not allowed to modify this post"
        	Test:       	TestPostService_DeletePost_PermissionDenied
--- FAIL: TestPostService_DeletePost_PermissionDenied (0.00s)
=== RUN   TestPostService_DeletePost_Success
[32mINFO[0m PostDeletedEvent event published successfully 2025-09-16 11:41:02
--- PASS: TestPostService_DeletePost_Success (0.00s)
FAIL
FAIL	postService/internal/service	1.665s
?   	postService/internal/transfer/request	[no test files]
?   	postService/internal/transfer/response	[no test files]
2025/09/16 11:41:03 github.com/testcontainers/testcontainers-go - Connected to docker: 
  Server Version: 28.3.0
  API Version: 1.50
  Operating System: Docker Desktop
  Total Memory: 3919 MB
  Labels:
    com.docker.desktop.address=unix:///Users/sayanseksenbaev/Library/Containers/com.docker.docker/Data/docker-cli.sock
  Testcontainers for Go Version: v0.38.0
  Resolved Docker Host: unix:///var/run/docker.sock
  Resolved Docker Socket Path: /var/run/docker.sock
  Test SessionID: 3b940bd857e0ac8eeaf3d47d99e05c7d8851200caf7018b0880c027adc2fb986
  Test ProcessID: 8511a288-8c52-4298-902b-694c0d84e9bd
2025/09/16 11:41:03 🐳 Creating container for image testcontainers/ryuk:0.12.0
2025/09/16 11:41:03 ✅ Container created: 8940ef887024
2025/09/16 11:41:03 🐳 Starting container: 8940ef887024
2025/09/16 11:41:03 ✅ Container started: 8940ef887024
2025/09/16 11:41:03 ⏳ Waiting for container id 8940ef887024 image: testcontainers/ryuk:0.12.0. Waiting for: &{Port:8080/tcp timeout:<nil> PollInterval:100ms skipInternalCheck:false skipExternalCheck:false}
2025/09/16 11:41:03 🔔 Container is ready: 8940ef887024
2025/09/16 11:41:04 🐳 Creating container for image mongo:6.0
2025/09/16 11:41:04 ✅ Container created: 5d0570779134
2025/09/16 11:41:04 🐳 Starting container: 5d0570779134
2025/09/16 11:41:04 ✅ Container started: 5d0570779134
2025/09/16 11:41:04 ⏳ Waiting for container id 5d0570779134 image: mongo:6.0. Waiting for: &{Port:27017/tcp timeout:<nil> PollInterval:100ms skipInternalCheck:false skipExternalCheck:false}
2025/09/16 11:41:05 🔔 Container is ready: 5d0570779134
2025/09/16 11:41:05 🐳 Creating container for image redis:7.0
2025/09/16 11:41:05 ✅ Container created: 307b34d87570
2025/09/16 11:41:05 🐳 Starting container: 307b34d87570
2025/09/16 11:41:06 ✅ Container started: 307b34d87570
2025/09/16 11:41:06 ⏳ Waiting for container id 307b34d87570 image: redis:7.0. Waiting for: &{Port:6379/tcp timeout:<nil> PollInterval:100ms skipInternalCheck:false skipExternalCheck:false}
2025/09/16 11:41:06 🔔 Container is ready: 307b34d87570
2025/09/16 11:41:06 🐳 Creating container for image minio/minio:RELEASE.2025-04-22T22-12-26Z
2025/09/16 11:41:06 ✅ Container created: 5f1479ea816f
2025/09/16 11:41:06 🐳 Starting container: 5f1479ea816f
2025/09/16 11:41:06 ✅ Container started: 5f1479ea816f
2025/09/16 11:41:06 ⏳ Waiting for container id 5f1479ea816f image: minio/minio:RELEASE.2025-04-22T22-12-26Z. Waiting for: &{timeout:<nil> Log:API: http:// IsRegexp:false Occurrence:1 PollInterval:100ms check:<nil> submatchCallback:<nil> re:<nil> log:[]}
2025/09/16 11:41:07 🔔 Container is ready: 5f1479ea816f
2025/09/16 11:41:07 🐳 Creating container for image bitnami/kafka:3.6.1
2025/09/16 11:41:07 ✅ Container created: 808eda9b70b7
2025/09/16 11:41:07 🐳 Starting container: 808eda9b70b7
2025/09/16 11:41:08 ✅ Container started: 808eda9b70b7
2025/09/16 11:41:08 ⏳ Waiting for container id 808eda9b70b7 image: bitnami/kafka:3.6.1. Waiting for: &{Port:9092/tcp timeout:0x14000323370 PollInterval:100ms skipInternalCheck:false skipExternalCheck:false}
2025/09/16 11:41:13 🔔 Container is ready: 808eda9b70b7
[32mINFO[0m Connected to MongoDB 2025-09-16 11:41:14
[32mINFO[0m ✅ Connected to Redis at localhost:61079 (DB=0) 2025-09-16 11:41:14
[32mINFO[0m Redis connected 2025-09-16 11:41:14
[32mINFO[0m ✅ Successfully connected to MinIO 2025-09-16 11:41:14
[32mINFO[0m FileStorage connected: bucket=test-bucket host=localhost 2025-09-16 11:41:14
%3|1758004874.707|FAIL|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Connect to ipv6#[::1]:9092 failed: Connection refused (after 0ms in state CONNECT)
[32mINFO[0m Kafka producer initialized for topic: post-events 2025-09-16 11:41:14
[32mINFO[0m Kafka broker: localhost:9092 2025-09-16 11:41:14
=== RUN   TestPostLifecycle
%3|1758004875.710|FAIL|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Connect to ipv6#[::1]:9092 failed: Connection refused (after 0ms in state CONNECT, 1 identical error(s) suppressed)
--- PASS: TestPostLifecycle (10.06s)
PASS
2025/09/16 11:41:24 🐳 Stopping container: 5d0570779134
2025/09/16 11:41:25 ✅ Container stopped: 5d0570779134
2025/09/16 11:41:25 🐳 Terminating container: 5d0570779134
2025/09/16 11:41:25 🚫 Container terminated: 5d0570779134
2025/09/16 11:41:25 🐳 Stopping container: 307b34d87570
2025/09/16 11:41:25 ✅ Container stopped: 307b34d87570
2025/09/16 11:41:25 🐳 Terminating container: 307b34d87570
2025/09/16 11:41:25 🚫 Container terminated: 307b34d87570
2025/09/16 11:41:25 🐳 Stopping container: 5f1479ea816f
2025/09/16 11:41:25 ✅ Container stopped: 5f1479ea816f
2025/09/16 11:41:25 🐳 Terminating container: 5f1479ea816f
2025/09/16 11:41:25 🚫 Container terminated: 5f1479ea816f
2025/09/16 11:41:25 🐳 Stopping container: 808eda9b70b7
%6|1758004885.705|FAIL|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1: Disconnected (after 6974ms in state UP)
2025/09/16 11:41:26 ✅ Container stopped: 808eda9b70b7
2025/09/16 11:41:26 🐳 Terminating container: 808eda9b70b7
2025/09/16 11:41:26 🚫 Container terminated: 808eda9b70b7
ok  	postService/tests/integration	25.564s
?   	postService/tests/testutil	[no test files]
FAIL
